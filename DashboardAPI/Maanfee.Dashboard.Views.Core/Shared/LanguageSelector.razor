@namespace Maanfee.Dashboard.Views.Core
@using System.Globalization

<MudMenu Icon="@Icons.Material.Outlined.Translate" Color="Color.Inherit"
         AnchorOrigin="Origin.BottomCenter" TransformOrigin="Origin.BottomCenter" Dense="true">
    @foreach (var item in LanguageService.GetSupportedLanguages())
    {
        <MudMenuItem OnClick="(() => ChangeLanguageAsync(item))">@item.DisplayName</MudMenuItem>
    }
</MudMenu>

    @code {

    private async Task ChangeLanguageAsync(CultureInfo Culture)
    {
        SharedLayoutSettings.CultureCode = Culture.Name;
        SharedLayoutSettings.IsRTL = Culture.TextInfo.IsRightToLeft;
        StateHasChanged();

        await LocalConfiguration.SetConfigurationAsync();
        
        Navigation.NavigateTo(Navigation.Uri, forceLoad: true);
    }
}
