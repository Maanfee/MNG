@namespace Maanfee.Dashboard.Views.Core
@inherits _BaseView

<style>
    .mud-card-header {
        padding: 8px 16px 8px 16px !important;
    }

    .mud-toolbar-gutters {
        padding-left: 0px !important;
        padding-right: 0px !important;
    }
</style>

<MudRTLProvider RightToLeft="@SharedLayoutSettings.IsRTL">
    <MudDialog OnKeyDown="@OnKeyDown" @attributes="AdditionalAttributes">
        <DialogContent>
            @if (!IsLoaded)
            {
                @*  <DashboardOverlay Random="true" /> *@
            }
            else
            {
                <MudCard Outlined="true" Square="true" Class="mt-4 mb-4">
                    <MudCardHeader>
                        <CardHeaderAvatar>
                            <MudAvatar Color="Color.Secondary">I</MudAvatar>
                        </CardHeaderAvatar>
                        <CardHeaderContent>
                            @if (MaanfeeDashboardHeaderContent != null)
                            {
                                @MaanfeeDashboardHeaderContent
                            }
                            else
                            {
                                <MudText Color="Color.Primary">
                                    @Title
                                </MudText>
                            }
                        </CardHeaderContent>
                        <CardHeaderActions>
                            <MudToolBar Dense WrapContent="true" Gutters="true">
                                <MudTooltip Text="@DashboardResource.StringInformation" Color="Color.Tertiary" Arrow>
                                    <MudIconButton OnClick="OpenInformationDialog" Icon="@Icons.Material.Filled.Settings" Color="Color.Success" Class="mt-2" />
                                </MudTooltip>
                                <MudTooltip Text="@DashboardResource.StringCancel" Color="Color.Tertiary" Arrow>
                                    <MudIconButton OnClick="@(() => Close())" Icon="@Icons.Material.Filled.Close" Color="Color.Error" Class="mt-2" />
                                </MudTooltip>
                            </MudToolBar>
                        </CardHeaderActions>
                    </MudCardHeader>
                    <MudDivider DividerType="DividerType.FullWidth" />
                    <MudCardContent>
                        @MaanfeeDashboardDialogContent
                    </MudCardContent>
                    <MudDivider DividerType="DividerType.FullWidth" />
                    <MudCardActions>
                        @if (MaanfeeDashboardDialogActionContent != null)
                        {
                            @MaanfeeDashboardDialogActionContent
                        }
                        @*  <MudButton Variant="Variant.Text" Color="Color.Primary">Read more</MudButton> *@
                        @*  <MudIconButton Icon="@Icons.Material.Filled.Favorite" Color="Color.Default" /> *@
                        @*     <MudIconButton Icon="@Icons.Material.Filled.Share" Color="Color.Default" /> *@
                    </MudCardActions>
                </MudCard>
            }
        </DialogContent>
    </MudDialog>
</MudRTLProvider>

@code {

    [CascadingParameter]
    public IMudDialogInstance? MudDialog { get; set; }

    public void Close() => MudDialog?.Close();

    public void Close(DialogResult result) => MudDialog?.Close(result);

    // ***************************************************

    [Parameter(CaptureUnmatchedValues = true)]
    public Dictionary<string, object>? AdditionalAttributes { get; set; }

    [Parameter]
    public bool IsLoaded { get; set; } = true;

    [Parameter]
    public string? Title { get; set; }

    // ***************************************************

    [Parameter]
    public RenderFragment? MaanfeeDashboardHeaderContent { get; set; }

    [Parameter]
    public RenderFragment? MaanfeeDashboardDialogContent { get; set; }

    [Parameter]
    public RenderFragment? MaanfeeDashboardDialogActionContent { get; set; }

    // ********************* Events *********************

    [Parameter]
    public EventCallback<KeyboardEventArgs> OnKeyDown { get; set; }

}
